(this.webpackJsonpneawsociale_redux=this.webpackJsonpneawsociale_redux||[]).push([[0],{64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},74:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(19),i=a.n(s),o=(a(64),a(65),a(22)),r=(a(66),a(97)),l=a(95),d=a(51),u=a.n(d),j=a(52),h=a.n(j),m=a(13),b=a(25),O=Object(b.b)({name:"user",initialState:{user:null},reducers:{setChat:function(e,t){e.chatId=t.payload.chatId,e.chatName=t.payload.chatName}}}),p=O.actions.setChat,f=function(e){return e.chat.chatName},v=function(e){return e.chat.chatId},x=O.reducer,g=a(27),N=g.a.initializeApp({apiKey:"AIzaSyAelJtJisvpG9DraXc45tQsEaldqwOTMYQ",authDomain:"imessage-clone-eaaaf.firebaseapp.com",projectId:"imessage-clone-eaaaf",storageBucket:"imessage-clone-eaaaf.appspot.com",messagingSenderId:"384850610312",appId:"1:384850610312:web:db6f25ed7714862931b73d",measurementId:"G-TGL3TRWVB9"}).firestore(),_=g.a.auth(),w=new g.a.auth.GoogleAuthProvider,y=N,S=(a(74),a(55)),I=a(5);var k=function(e){var t,a,n,s,i=e.id,l=e.chatName,d=Object(m.b)(),u=Object(c.useState)([]),j=Object(o.a)(u,2),h=j[0],b=j[1];return Object(c.useEffect)((function(){y.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return b(e.docs.map((function(e){return e.data()})))}))}),[i]),Object(I.jsxs)("div",{onClick:function(){return d(p({chatId:i,chatName:l}))},className:"sidebarChat",children:[Object(I.jsx)(r.a,{src:null===(t=h[0])||void 0===t?void 0:t.photo}),Object(I.jsxs)("div",{className:"sidebarChat__info",children:[Object(I.jsx)("h3",{children:l}),Object(I.jsx)("p",{children:null===(a=h[0])||void 0===a?void 0:a.message}),Object(I.jsx)("small",{children:S.a(new Date(null===(n=h[0])||void 0===n||null===(s=n.timestamp)||void 0===s?void 0:s.toDate()))})]})]})},C=Object(b.b)({name:"user",initialState:{user:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null}}}),B=C.actions,D=B.login,A=B.logout,E=function(e){return e.user.user},T=C.reducer;var G=function(){var e=Object(m.c)(E),t=Object(c.useState)([]),a=Object(o.a)(t,2),n=a[0],s=a[1];return Object(c.useEffect)((function(){y.collection("chats").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(I.jsxs)("div",{className:"sidebar",children:[Object(I.jsxs)("div",{className:"sidebar__header",children:[Object(I.jsx)(r.a,{onClick:function(){return _.signOut()},src:e.photo,className:"sidebar__avatar"}),Object(I.jsxs)("div",{className:"sidebar__input",children:[Object(I.jsx)(u.a,{}),Object(I.jsx)("input",{placeholder:"search"})]}),Object(I.jsx)(l.a,{variant:"outlined",className:"sidebar__inputButton",children:Object(I.jsx)(h.a,{onClick:function(){var e=prompt("Please enter a chat name");e&&y.collection("chats").add({chatName:e})}})})]}),Object(I.jsx)("div",{className:"sidebar__chats",children:n.map((function(e){var t=e.id,a=e.data.chatName;return Object(I.jsx)(k,{id:t,chatName:a},t)}))})]})},J=(a(77),a(54)),L=a.n(J),W=(a(78),Object(c.forwardRef)((function(e,t){e.id;var a=e.contents,c=a.timestamp,n=(a.displayName,a.email),s=a.message,i=a.photo,o=(a.uid,Object(m.c)(E));return Object(I.jsxs)("div",{ref:t,className:"message ".concat(o.email===n&&n&&"message__sender"),children:[Object(I.jsx)(r.a,{className:"message__photo",src:i}),Object(I.jsx)("p",{children:s}),Object(I.jsx)("small",{children:new Date(null===c||void 0===c?void 0:c.toDate()).toLocaleString()})]})}))),M=a(53);var P=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)([]),i=Object(o.a)(s,2),r=i[0],d=i[1],u=Object(m.c)(f),j=Object(m.c)(v),h=Object(m.c)(E);return Object(c.useEffect)((function(){j&&y.collection("chats").doc(j).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return d(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[j]),Object(I.jsxs)("div",{className:"chat",children:[Object(I.jsxs)("div",{className:"chat__header",children:[Object(I.jsxs)("h4",{children:["To:",Object(I.jsxs)("span",{className:"chat__name",children:[" ",u]})]}),Object(I.jsx)("strong",{children:"Details"})]}),Object(I.jsx)("div",{className:"chat__messages",children:Object(I.jsx)(M.a,{children:r.map((function(e){var t=e.id,a=e.data;return Object(I.jsx)(W,{contents:a},t)}))})}),Object(I.jsxs)("div",{className:"chat__input",children:[Object(I.jsxs)("form",{children:[Object(I.jsx)("input",{value:a,onChange:function(e){return n(e.target.value)},placeholder:"ikteb hneye",type:"text"}),Object(I.jsx)("button",{onClick:function(e){e.preventDefault(),n(""),y.collection("chats").doc(j).collection("messages").add({timestamp:g.a.firestore.FieldValue.serverTimestamp(),message:a,uid:h.uid,photo:h.photo,email:h.email,displayName:h.displayName})},children:"Send Message"})]}),Object(I.jsx)(l.a,{children:Object(I.jsx)(L.a,{className:"chat__mic"})})]})]})};var R=function(){return Object(I.jsxs)("div",{className:"imessage",children:[Object(I.jsx)(G,{}),Object(I.jsx)(P,{})]})},z=a(96);a(79);var Q=function(){return Object(I.jsxs)("div",{className:"login",children:[Object(I.jsx)("div",{className:"login__logo",children:Object(I.jsx)("img",{src:"https://www.seekpng.com/png/full/138-1387775_login-to-do-whatever-you-want-login-icon.png",alt:"a yellow login logo"})}),Object(I.jsx)(z.a,{onClick:function(){_.signInWithPopup(w).catch((function(e){return alert(e.message)}))},children:"Sign In BALIIZ !"})]})};a(80);var V=function(){var e=Object(m.c)(E),t=Object(m.b)();return Object(c.useEffect)((function(){_.onAuthStateChanged((function(e){t(e?D({uid:e.uid,photo:e.photoURL,email:e.email,displayName:e.displayName}):A())}))}),[]),Object(I.jsx)("div",{className:"app",children:e?Object(I.jsx)(R,{}):Object(I.jsx)(Q,{})})},q=Object(b.a)({reducer:{user:T,chat:x}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(m.a,{store:q,children:Object(I.jsx)(V,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[81,1,2]]]);
//# sourceMappingURL=main.ce1e0bab.chunk.js.map