{"ast":null,"code":"import _slicedToArray from\"/media/amine/HDD1/Kraya/2DNI/TP/S2/Framework/Projet/IMessage-Clone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./Sidebar.css';import{Avatar,IconButton}from'@material-ui/core';import SearchIcon from'@material-ui/icons/Search';import MessageIcon from'@material-ui/icons/Message';import SidebarChat from'./SidebarChat';import{useSelector}from'react-redux';import{selectUser}from'./features/userSlice';import db,{auth}from'./Firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Sidebar(){var user=useSelector(selectUser);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chats=_useState2[0],setChats=_useState2[1];useEffect(function(){db.collection('chats').onSnapshot(function(snapshot){return setChats(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};}));});},[]);var addChat=function addChat(){var chatName=prompt('Please enter a chat name');if(chatName){db.collection('chats').add({chatName:chatName});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar__header\",children:[/*#__PURE__*/_jsx(Avatar,{onClick:function onClick(){return auth.signOut();},src:user.photo,className:\"sidebar__avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar__input\",children:[/*#__PURE__*/_jsx(SearchIcon,{}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"search\"})]}),/*#__PURE__*/_jsx(IconButton,{variant:\"outlined\",className:\"sidebar__inputButton\",children:/*#__PURE__*/_jsx(MessageIcon,{onClick:addChat})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar__chats\",children:chats.map(function(_ref){var id=_ref.id,chatName=_ref.data.chatName;return/*#__PURE__*/_jsx(SidebarChat,{id:id,chatName:chatName},id);})})]});}export default Sidebar;","map":{"version":3,"sources":["/media/amine/HDD1/Kraya/2DNI/TP/S2/Framework/Projet/IMessage-Clone/src/Sidebar.js"],"names":["React","useEffect","useState","Avatar","IconButton","SearchIcon","MessageIcon","SidebarChat","useSelector","selectUser","db","auth","Sidebar","user","chats","setChats","collection","onSnapshot","snapshot","docs","map","doc","id","data","addChat","chatName","prompt","add","signOut","photo"],"mappings":"qJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,eAAP,CACA,OAASC,MAAT,CAAiBC,UAAjB,KAAmC,mBAAnC,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,UAAT,KAA2B,sBAA3B,CACA,MAAOC,CAAAA,EAAP,EAAYC,IAAZ,KAAuB,YAAvB,C,wFAGA,QAASC,CAAAA,OAAT,EAAmB,CAEf,GAAMC,CAAAA,IAAI,CAAGL,WAAW,CAACC,UAAD,CAAxB,CAFe,cAIWP,QAAQ,CAAC,EAAD,CAJnB,wCAIRY,KAJQ,eAIDC,QAJC,eAMfd,SAAS,CAAC,UAAM,CACZS,EAAE,CAACM,UAAH,CAAc,OAAd,EAAuBC,UAAvB,CAAkC,SAAAC,QAAQ,QACtCH,CAAAA,QAAQ,CAACG,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAAAC,GAAG,QAAK,CAC/BC,EAAE,CAAED,GAAG,CAACC,EADuB,CAE/BC,IAAI,CAAEF,GAAG,CAACE,IAAJ,EAFyB,CAAL,EAArB,CAAD,CAD8B,EAA1C,EAMH,CAPQ,CAON,EAPM,CAAT,CASA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAElB,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAAC,0BAAD,CAAvB,CACA,GAAID,QAAJ,CAAc,CACVf,EAAE,CAACM,UAAH,CAAc,OAAd,EAAuBW,GAAvB,CAA2B,CACvBF,QAAQ,CAAEA,QADa,CAA3B,EAGH,CAEJ,CATD,CAWA,mBACI,aAAK,SAAS,CAAC,SAAf,wBAEI,aAAK,SAAS,CAAC,iBAAf,wBAEI,KAAC,MAAD,EAAQ,OAAO,CAAE,yBAAMd,CAAAA,IAAI,CAACiB,OAAL,EAAN,EAAjB,CACA,GAAG,CAAEf,IAAI,CAACgB,KADV,CACiB,SAAS,CAAC,iBAD3B,EAFJ,cAKI,aAAK,SAAS,CAAC,gBAAf,wBACI,KAAC,UAAD,IADJ,cAEI,cAAO,WAAW,CAAC,QAAnB,EAFJ,GALJ,cAUI,KAAC,UAAD,EAAY,OAAO,CAAC,UAApB,CAA+B,SAAS,CAAC,sBAAzC,uBACI,KAAC,WAAD,EAAa,OAAO,CAAEL,OAAtB,EADJ,EAVJ,GAFJ,cAmBI,YAAK,SAAS,CAAC,gBAAf,UACKV,KAAK,CAACM,GAAN,CAAU,kBAAEE,CAAAA,EAAF,MAAEA,EAAF,CAAaG,QAAb,MAAMF,IAAN,CAAaE,QAAb,oBAEP,KAAC,WAAD,EAAsB,EAAE,CAAEH,EAA1B,CAA8B,QAAQ,CAAEG,QAAxC,EAAkBH,EAAlB,CAFO,EAAV,CADL,EAnBJ,GADJ,CA+BH,CAED,cAAeV,CAAAA,OAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './Sidebar.css';\nimport { Avatar, IconButton } from '@material-ui/core';\nimport SearchIcon from '@material-ui/icons/Search';\nimport MessageIcon from '@material-ui/icons/Message';\nimport SidebarChat from './SidebarChat';\nimport { useSelector } from 'react-redux';\nimport { selectUser } from './features/userSlice';\nimport db, {auth} from './Firebase'\n\n\nfunction Sidebar() {\n\n    const user = useSelector(selectUser);\n\n    const [chats, setChats] = useState([]);\n\n    useEffect(() => {\n        db.collection('chats').onSnapshot(snapshot => (\n            setChats(snapshot.docs.map(doc => ({\n                id: doc.id,\n                data: doc.data(),\n            })))\n            ))\n    }, [])\n\n    const addChat = () => {\n        \n        const chatName = prompt('Please enter a chat name')\n        if (chatName) {\n            db.collection('chats').add({\n                chatName: chatName,\n            });\n        }\n    \n    };\n\n    return (\n        <div className='sidebar'>\n\n            <div className='sidebar__header'>\n\n                <Avatar onClick={() => auth.signOut()} \n                src={user.photo} className='sidebar__avatar'/>\n\n                <div className='sidebar__input'>\n                    <SearchIcon/>\n                    <input placeholder='search'/>\n                </div>\n\n                <IconButton variant='outlined' className='sidebar__inputButton'>\n                    <MessageIcon onClick={addChat}/>\n                </IconButton>\n                \n\n            </div>\n\n            <div className='sidebar__chats'>\n                {chats.map(({id, data: {chatName} }) => (\n                \n                    <SidebarChat key={id} id={id} chatName={chatName}/>\n                \n                ))}\n                       \n            </div>\n            \n        </div>\n    )\n}\n\nexport default Sidebar\n"]},"metadata":{},"sourceType":"module"}