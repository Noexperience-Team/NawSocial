{"ast":null,"code":"const crypto = require(\"crypto\");\n\nconst url = require(\"url\");\n\nconst auth = require(\"./auth\");\n\nconst errors = require(\"./errors\");\n\nconst events = require(\"./events\");\n\nconst requests = require(\"./requests\");\n\nconst PusherConfig = require(\"./pusher_config\");\n\nconst Token = require(\"./token\");\n\nconst WebHook = require(\"./webhook\");\n\nconst NotificationClient = require(\"./notification_client\");\n\nconst validateChannel = function (channel) {\n  if (typeof channel !== \"string\" || channel === \"\" || channel.match(/[^A-Za-z0-9_\\-=@,.;]/)) {\n    throw new Error(\"Invalid channel name: '\" + channel + \"'\");\n  }\n\n  if (channel.length > 200) {\n    throw new Error(\"Channel name too long: '\" + channel + \"'\");\n  }\n};\n\nconst validateSocketId = function (socketId) {\n  if (typeof socketId !== \"string\" || socketId === \"\" || !socketId.match(/^\\d+\\.\\d+$/)) {\n    throw new Error(\"Invalid socket id: '\" + socketId + \"'\");\n  }\n};\n/** Provides access to Pusher's REST API, WebHooks and authentication.\n *\n * @constructor\n * @param {Object} options\n * @param {String} [options.host=\"api.pusherapp.com\"] API hostname\n * @param {String} [options.notification_host=\"api.pusherapp.com\"] Notification API hostname\n * @param {Boolean} [options.useTLS=false] whether to use TLS\n * @param {Boolean} [options.encrypted=false] deprecated; renamed to `useTLS`\n * @param {Boolean} [options.notification_encrypted=false] whether to use TLS for notifications\n * @param {Integer} [options.port] port, default depends on the scheme\n * @param {Integer} options.appId application ID\n * @param {String} options.key application key\n * @param {String} options.secret application secret\n * @param {Integer} [options.timeout] request timeout in milliseconds\n * @param {Agent} [options.agent] http agent to use\n */\n\n\nfunction Pusher(options) {\n  this.config = new PusherConfig(options);\n  const notificationOptions = Object.assign({}, options, {\n    host: options.notificationHost,\n    encrypted: options.notificationEncrypted\n  });\n  this.notificationClient = new NotificationClient(notificationOptions);\n}\n/** Create a Pusher instance using a URL.\n *\n * URL should be in SCHEME://APP_KEY:SECRET_KEY@HOST:PORT/apps/APP_ID form.\n *\n * @param {String} pusherUrl URL containing endpoint and app details\n * @param {Object} [options] options, see the {@link Pusher} for details\n * @returns {Pusher} instance configured for the URL and options\n */\n\n\nPusher.forURL = function (pusherUrl, options) {\n  const apiUrl = url.parse(pusherUrl);\n  const apiPath = apiUrl.pathname.split(\"/\");\n  const apiAuth = apiUrl.auth.split(\":\");\n  return new Pusher(Object.assign({}, options || {}, {\n    scheme: apiUrl.protocol.replace(/:$/, \"\"),\n    host: apiUrl.hostname,\n    port: parseInt(apiUrl.port, 10) || undefined,\n    appId: parseInt(apiPath[apiPath.length - 1], 10),\n    key: apiAuth[0],\n    secret: apiAuth[1]\n  }));\n};\n/** Create a Pusher instance using a cluster name.\n *\n * @param {String} cluster cluster name\n * @param {Object} [options] options, see the {@link Pusher} for details\n * @returns {Pusher} instance configured for the cluster and options\n */\n\n\nPusher.forCluster = function (cluster, options) {\n  return new Pusher(Object.assign({}, options || {}, {\n    host: \"api-\" + cluster + \".pusher.com\"\n  }));\n};\n/** Returns a signature for given socket id, channel and socket data.\n *\n * @param {String} socketId socket id\n * @param {String} channel channel name\n * @param {Object} [data] additional socket data\n * @returns {String} authentication signature\n */\n\n\nPusher.prototype.authenticate = function (socketId, channel, data) {\n  validateSocketId(socketId);\n  validateChannel(channel);\n  return auth.getSocketSignature(this, this.config.token, channel, socketId, data);\n};\n/** Triggers an event.\n *\n * Channel names can contain only characters which are alphanumeric, '_' or '-'\n * and have to be at most 200 characters long.\n *\n * Event name can be at most 200 characters long.\n *\n * Returns a promise resolving to a response, or rejecting to a RequestError.\n *\n * @param {String|String[]} channel list of at most 100 channels\n * @param {String} event event name\n * @param data event data, objects are JSON-encoded\n * @param {Object} [params] additional optional request body parameters\n * @param {String} [params.socket_id] id of a socket that should not receive the event\n * @param {String} [params.info] a comma separate list of attributes to be returned in the response. Experimental, see https://pusher.com/docs/lab#experimental-program\n * @see RequestError\n */\n\n\nPusher.prototype.trigger = function (channels, event, data, params) {\n  if (params && params.socket_id) {\n    validateSocketId(params.socket_id);\n  }\n\n  if (!(channels instanceof Array)) {\n    // add single channel to array for multi trigger compatibility\n    channels = [channels];\n  }\n\n  if (event.length > 200) {\n    throw new Error(\"Too long event name: '\" + event + \"'\");\n  }\n\n  if (channels.length > 100) {\n    throw new Error(\"Can't trigger a message to more than 100 channels\");\n  }\n\n  for (let i = 0; i < channels.length; i++) {\n    validateChannel(channels[i]);\n  }\n\n  return events.trigger(this, channels, event, data, params);\n};\n/* Triggers a batch of events\n *\n * @param {Event[]} An array of events, where Event is\n * {\n *   name: string,\n *   channel: string,\n *   data: any JSON-encodable data,\n *   socket_id: [optional] string,\n *   info: [optional] string experimental, see https://pusher.com/docs/lab#experimental-program\n * }\n */\n\n\nPusher.prototype.triggerBatch = function (batch) {\n  return events.triggerBatch(this, batch);\n};\n\nPusher.prototype.notify = function () {\n  this.notificationClient.notify.apply(this.notificationClient, arguments);\n};\n/** Makes a POST request to Pusher, handles the authentication.\n *\n * Returns a promise resolving to a response, or rejecting to a RequestError.\n *\n * @param {Object} options\n * @param {String} options.path request path\n * @param {Object} options.params query params\n * @param {String} options.body request body\n * @see RequestError\n */\n\n\nPusher.prototype.post = function (options) {\n  return requests.send(this.config, Object.assign({}, options, {\n    method: \"POST\"\n  }));\n};\n/** Makes a GET request to Pusher, handles the authentication.\n *\n * Returns a promise resolving to a response, or rejecting to a RequestError.\n *\n * @param {Object} options\n * @param {String} options.path request path\n * @param {Object} options.params query params\n * @see RequestError\n */\n\n\nPusher.prototype.get = function (options) {\n  return requests.send(this.config, Object.assign({}, options, {\n    method: \"GET\"\n  }));\n};\n/** Creates a WebHook object for a given request.\n *\n * @param {Object} request\n * @param {Object} request.headers WebHook HTTP headers with lower-case keys\n * @param {String} request.rawBody raw WebHook body\n * @returns {WebHook}\n */\n\n\nPusher.prototype.webhook = function (request) {\n  return new WebHook(this.config.token, request);\n};\n/** Builds a signed query string that can be used in a request to Pusher.\n *\n * @param {Object} options\n * @param {String} options.method request method\n * @param {String} options.path request path\n * @param {Object} options.params query params\n * @param {String} options.body request body\n * @returns {String} signed query string\n */\n\n\nPusher.prototype.createSignedQueryString = function (options) {\n  return requests.createSignedQueryString(this.config.token, options);\n};\n\nPusher.prototype.channelSharedSecret = function (channel) {\n  return crypto.createHash(\"sha256\").update(channel + this.config.encryptionMasterKey).digest();\n};\n/** Exported {@link Token} constructor. */\n\n\nPusher.Token = Token;\n/** Exported {@link RequestError} constructor. */\n\nPusher.RequestError = errors.RequestError;\n/** Exported {@link WebHookError} constructor. */\n\nPusher.WebHookError = errors.WebHookError;\nmodule.exports = Pusher;","map":{"version":3,"sources":["/media/amine/HDD1/Kraya/2DNI/TP/S2/Framework/Projet/IMessage-Clone/Frontend/node_modules/pusher/lib/pusher.js"],"names":["crypto","require","url","auth","errors","events","requests","PusherConfig","Token","WebHook","NotificationClient","validateChannel","channel","match","Error","length","validateSocketId","socketId","Pusher","options","config","notificationOptions","Object","assign","host","notificationHost","encrypted","notificationEncrypted","notificationClient","forURL","pusherUrl","apiUrl","parse","apiPath","pathname","split","apiAuth","scheme","protocol","replace","hostname","port","parseInt","undefined","appId","key","secret","forCluster","cluster","prototype","authenticate","data","getSocketSignature","token","trigger","channels","event","params","socket_id","Array","i","triggerBatch","batch","notify","apply","arguments","post","send","method","get","webhook","request","createSignedQueryString","channelSharedSecret","createHash","update","encryptionMasterKey","digest","RequestError","WebHookError","module","exports"],"mappings":"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","sourcesContent":["const crypto = require(\"crypto\")\nconst url = require(\"url\")\n\nconst auth = require(\"./auth\")\nconst errors = require(\"./errors\")\nconst events = require(\"./events\")\nconst requests = require(\"./requests\")\n\nconst PusherConfig = require(\"./pusher_config\")\nconst Token = require(\"./token\")\nconst WebHook = require(\"./webhook\")\nconst NotificationClient = require(\"./notification_client\")\n\nconst validateChannel = function (channel) {\n  if (\n    typeof channel !== \"string\" ||\n    channel === \"\" ||\n    channel.match(/[^A-Za-z0-9_\\-=@,.;]/)\n  ) {\n    throw new Error(\"Invalid channel name: '\" + channel + \"'\")\n  }\n  if (channel.length > 200) {\n    throw new Error(\"Channel name too long: '\" + channel + \"'\")\n  }\n}\n\nconst validateSocketId = function (socketId) {\n  if (\n    typeof socketId !== \"string\" ||\n    socketId === \"\" ||\n    !socketId.match(/^\\d+\\.\\d+$/)\n  ) {\n    throw new Error(\"Invalid socket id: '\" + socketId + \"'\")\n  }\n}\n\n/** Provides access to Pusher's REST API, WebHooks and authentication.\n *\n * @constructor\n * @param {Object} options\n * @param {String} [options.host=\"api.pusherapp.com\"] API hostname\n * @param {String} [options.notification_host=\"api.pusherapp.com\"] Notification API hostname\n * @param {Boolean} [options.useTLS=false] whether to use TLS\n * @param {Boolean} [options.encrypted=false] deprecated; renamed to `useTLS`\n * @param {Boolean} [options.notification_encrypted=false] whether to use TLS for notifications\n * @param {Integer} [options.port] port, default depends on the scheme\n * @param {Integer} options.appId application ID\n * @param {String} options.key application key\n * @param {String} options.secret application secret\n * @param {Integer} [options.timeout] request timeout in milliseconds\n * @param {Agent} [options.agent] http agent to use\n */\nfunction Pusher(options) {\n  this.config = new PusherConfig(options)\n  const notificationOptions = Object.assign({}, options, {\n    host: options.notificationHost,\n    encrypted: options.notificationEncrypted,\n  })\n  this.notificationClient = new NotificationClient(notificationOptions)\n}\n\n/** Create a Pusher instance using a URL.\n *\n * URL should be in SCHEME://APP_KEY:SECRET_KEY@HOST:PORT/apps/APP_ID form.\n *\n * @param {String} pusherUrl URL containing endpoint and app details\n * @param {Object} [options] options, see the {@link Pusher} for details\n * @returns {Pusher} instance configured for the URL and options\n */\nPusher.forURL = function (pusherUrl, options) {\n  const apiUrl = url.parse(pusherUrl)\n  const apiPath = apiUrl.pathname.split(\"/\")\n  const apiAuth = apiUrl.auth.split(\":\")\n\n  return new Pusher(\n    Object.assign({}, options || {}, {\n      scheme: apiUrl.protocol.replace(/:$/, \"\"),\n      host: apiUrl.hostname,\n      port: parseInt(apiUrl.port, 10) || undefined,\n      appId: parseInt(apiPath[apiPath.length - 1], 10),\n      key: apiAuth[0],\n      secret: apiAuth[1],\n    })\n  )\n}\n\n/** Create a Pusher instance using a cluster name.\n *\n * @param {String} cluster cluster name\n * @param {Object} [options] options, see the {@link Pusher} for details\n * @returns {Pusher} instance configured for the cluster and options\n */\nPusher.forCluster = function (cluster, options) {\n  return new Pusher(\n    Object.assign({}, options || {}, {\n      host: \"api-\" + cluster + \".pusher.com\",\n    })\n  )\n}\n\n/** Returns a signature for given socket id, channel and socket data.\n *\n * @param {String} socketId socket id\n * @param {String} channel channel name\n * @param {Object} [data] additional socket data\n * @returns {String} authentication signature\n */\nPusher.prototype.authenticate = function (socketId, channel, data) {\n  validateSocketId(socketId)\n  validateChannel(channel)\n\n  return auth.getSocketSignature(\n    this,\n    this.config.token,\n    channel,\n    socketId,\n    data\n  )\n}\n\n/** Triggers an event.\n *\n * Channel names can contain only characters which are alphanumeric, '_' or '-'\n * and have to be at most 200 characters long.\n *\n * Event name can be at most 200 characters long.\n *\n * Returns a promise resolving to a response, or rejecting to a RequestError.\n *\n * @param {String|String[]} channel list of at most 100 channels\n * @param {String} event event name\n * @param data event data, objects are JSON-encoded\n * @param {Object} [params] additional optional request body parameters\n * @param {String} [params.socket_id] id of a socket that should not receive the event\n * @param {String} [params.info] a comma separate list of attributes to be returned in the response. Experimental, see https://pusher.com/docs/lab#experimental-program\n * @see RequestError\n */\nPusher.prototype.trigger = function (channels, event, data, params) {\n  if (params && params.socket_id) {\n    validateSocketId(params.socket_id)\n  }\n  if (!(channels instanceof Array)) {\n    // add single channel to array for multi trigger compatibility\n    channels = [channels]\n  }\n  if (event.length > 200) {\n    throw new Error(\"Too long event name: '\" + event + \"'\")\n  }\n  if (channels.length > 100) {\n    throw new Error(\"Can't trigger a message to more than 100 channels\")\n  }\n  for (let i = 0; i < channels.length; i++) {\n    validateChannel(channels[i])\n  }\n  return events.trigger(this, channels, event, data, params)\n}\n\n/* Triggers a batch of events\n *\n * @param {Event[]} An array of events, where Event is\n * {\n *   name: string,\n *   channel: string,\n *   data: any JSON-encodable data,\n *   socket_id: [optional] string,\n *   info: [optional] string experimental, see https://pusher.com/docs/lab#experimental-program\n * }\n */\nPusher.prototype.triggerBatch = function (batch) {\n  return events.triggerBatch(this, batch)\n}\n\nPusher.prototype.notify = function () {\n  this.notificationClient.notify.apply(this.notificationClient, arguments)\n}\n\n/** Makes a POST request to Pusher, handles the authentication.\n *\n * Returns a promise resolving to a response, or rejecting to a RequestError.\n *\n * @param {Object} options\n * @param {String} options.path request path\n * @param {Object} options.params query params\n * @param {String} options.body request body\n * @see RequestError\n */\nPusher.prototype.post = function (options) {\n  return requests.send(\n    this.config,\n    Object.assign({}, options, { method: \"POST\" })\n  )\n}\n\n/** Makes a GET request to Pusher, handles the authentication.\n *\n * Returns a promise resolving to a response, or rejecting to a RequestError.\n *\n * @param {Object} options\n * @param {String} options.path request path\n * @param {Object} options.params query params\n * @see RequestError\n */\nPusher.prototype.get = function (options) {\n  return requests.send(\n    this.config,\n    Object.assign({}, options, { method: \"GET\" })\n  )\n}\n\n/** Creates a WebHook object for a given request.\n *\n * @param {Object} request\n * @param {Object} request.headers WebHook HTTP headers with lower-case keys\n * @param {String} request.rawBody raw WebHook body\n * @returns {WebHook}\n */\nPusher.prototype.webhook = function (request) {\n  return new WebHook(this.config.token, request)\n}\n\n/** Builds a signed query string that can be used in a request to Pusher.\n *\n * @param {Object} options\n * @param {String} options.method request method\n * @param {String} options.path request path\n * @param {Object} options.params query params\n * @param {String} options.body request body\n * @returns {String} signed query string\n */\nPusher.prototype.createSignedQueryString = function (options) {\n  return requests.createSignedQueryString(this.config.token, options)\n}\n\nPusher.prototype.channelSharedSecret = function (channel) {\n  return crypto\n    .createHash(\"sha256\")\n    .update(channel + this.config.encryptionMasterKey)\n    .digest()\n}\n\n/** Exported {@link Token} constructor. */\nPusher.Token = Token\n/** Exported {@link RequestError} constructor. */\nPusher.RequestError = errors.RequestError\n/** Exported {@link WebHookError} constructor. */\nPusher.WebHookError = errors.WebHookError\n\nmodule.exports = Pusher\n"]},"metadata":{},"sourceType":"script"}