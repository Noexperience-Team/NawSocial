{"ast":null,"code":"const util = require(\"./util\");\n\nfunction getSocketSignature(pusher, token, channel, socketID, data) {\n  const result = {};\n  const signatureData = [socketID, channel];\n\n  if (data) {\n    const serializedData = JSON.stringify(data);\n    signatureData.push(serializedData);\n    result.channel_data = serializedData;\n  }\n\n  result.auth = token.key + \":\" + token.sign(signatureData.join(\":\"));\n\n  if (util.isEncryptedChannel(channel)) {\n    if (pusher.config.encryptionMasterKey === undefined) {\n      throw new Error(\"Cannot generate shared_secret because encryptionMasterKey is not set\");\n    }\n\n    result.shared_secret = Buffer.from(pusher.channelSharedSecret(channel)).toString(\"base64\");\n  }\n\n  return result;\n}\n\nexports.getSocketSignature = getSocketSignature;","map":{"version":3,"sources":["/media/amine/HDD1/Kraya/2DNI/TP/S2/Framework/Projet/IMessage-Clone/Frontend/node_modules/pusher/lib/auth.js"],"names":["util","require","getSocketSignature","pusher","token","channel","socketID","data","result","signatureData","serializedData","JSON","stringify","push","channel_data","auth","key","sign","join","isEncryptedChannel","config","encryptionMasterKey","undefined","Error","shared_secret","Buffer","from","channelSharedSecret","toString","exports"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,QAAD,CAApB;;AAEA,SAASC,kBAAT,CAA4BC,MAA5B,EAAoCC,KAApC,EAA2CC,OAA3C,EAAoDC,QAApD,EAA8DC,IAA9D,EAAoE;AAClE,QAAMC,MAAM,GAAG,EAAf;AAEA,QAAMC,aAAa,GAAG,CAACH,QAAD,EAAWD,OAAX,CAAtB;;AACA,MAAIE,IAAJ,EAAU;AACR,UAAMG,cAAc,GAAGC,IAAI,CAACC,SAAL,CAAeL,IAAf,CAAvB;AACAE,IAAAA,aAAa,CAACI,IAAd,CAAmBH,cAAnB;AACAF,IAAAA,MAAM,CAACM,YAAP,GAAsBJ,cAAtB;AACD;;AAEDF,EAAAA,MAAM,CAACO,IAAP,GAAcX,KAAK,CAACY,GAAN,GAAY,GAAZ,GAAkBZ,KAAK,CAACa,IAAN,CAAWR,aAAa,CAACS,IAAd,CAAmB,GAAnB,CAAX,CAAhC;;AAEA,MAAIlB,IAAI,CAACmB,kBAAL,CAAwBd,OAAxB,CAAJ,EAAsC;AACpC,QAAIF,MAAM,CAACiB,MAAP,CAAcC,mBAAd,KAAsCC,SAA1C,EAAqD;AACnD,YAAM,IAAIC,KAAJ,CACJ,sEADI,CAAN;AAGD;;AACDf,IAAAA,MAAM,CAACgB,aAAP,GAAuBC,MAAM,CAACC,IAAP,CACrBvB,MAAM,CAACwB,mBAAP,CAA2BtB,OAA3B,CADqB,EAErBuB,QAFqB,CAEZ,QAFY,CAAvB;AAGD;;AAED,SAAOpB,MAAP;AACD;;AAEDqB,OAAO,CAAC3B,kBAAR,GAA6BA,kBAA7B","sourcesContent":["const util = require(\"./util\")\n\nfunction getSocketSignature(pusher, token, channel, socketID, data) {\n  const result = {}\n\n  const signatureData = [socketID, channel]\n  if (data) {\n    const serializedData = JSON.stringify(data)\n    signatureData.push(serializedData)\n    result.channel_data = serializedData\n  }\n\n  result.auth = token.key + \":\" + token.sign(signatureData.join(\":\"))\n\n  if (util.isEncryptedChannel(channel)) {\n    if (pusher.config.encryptionMasterKey === undefined) {\n      throw new Error(\n        \"Cannot generate shared_secret because encryptionMasterKey is not set\"\n      )\n    }\n    result.shared_secret = Buffer.from(\n      pusher.channelSharedSecret(channel)\n    ).toString(\"base64\")\n  }\n\n  return result\n}\n\nexports.getSocketSignature = getSocketSignature\n"]},"metadata":{},"sourceType":"script"}