{"ast":null,"code":"const Token = require(\"./token\");\n\nconst isBase64 = require(\"is-base64\");\n\nfunction Config(options) {\n  options = options || {};\n  let useTLS = false;\n\n  if (options.useTLS !== undefined && options.encrypted !== undefined) {\n    throw new Error(\"Cannot set both `useTLS` and `encrypted` configuration options\");\n  } else if (options.useTLS !== undefined) {\n    useTLS = options.useTLS;\n  } else if (options.encrypted !== undefined) {\n    // `encrypted` deprecated in favor of `useTLS`\n    console.warn(\"`encrypted` option is deprecated in favor of `useTLS`\");\n    useTLS = options.encrypted;\n  }\n\n  this.scheme = options.scheme || (useTLS ? \"https\" : \"http\");\n  this.port = options.port;\n  this.appId = options.appId;\n  this.token = new Token(options.key, options.secret);\n  this.timeout = options.timeout;\n  this.agent = options.agent; // Handle deprecated raw 32 byte string as key\n\n  if (options.encryptionMasterKey !== undefined) {\n    if (options.encryptionMasterKeyBase64 !== undefined) {\n      throw new Error(\"Do not specify both encryptionMasterKey and encryptionMasterKeyBase64. \" + \"encryptionMasterKey is deprecated, please specify only encryptionMasterKeyBase64.\");\n    }\n\n    console.warn(\"`encryptionMasterKey` option is deprecated in favor of `encryptionMasterKeyBase64`\");\n\n    if (typeof options.encryptionMasterKey !== \"string\") {\n      throw new Error(\"encryptionMasterKey must be a string\");\n    }\n\n    if (options.encryptionMasterKey.length !== 32) {\n      throw new Error(\"encryptionMasterKey must be 32 bytes long, but the string '\" + options.encryptionMasterKey + \"' is \" + options.encryptionMasterKey.length + \" bytes long\");\n    }\n\n    this.encryptionMasterKey = options.encryptionMasterKey;\n  } // Handle base64 encoded 32 byte key to encourage use of the full range of byte values\n\n\n  if (options.encryptionMasterKeyBase64 !== undefined) {\n    if (typeof options.encryptionMasterKeyBase64 !== \"string\") {\n      throw new Error(\"encryptionMasterKeyBase64 must be a string\");\n    }\n\n    if (!isBase64(options.encryptionMasterKeyBase64)) {\n      throw new Error(\"encryptionMasterKeyBase64 must be valid base64\");\n    }\n\n    const decodedKey = Buffer.from(options.encryptionMasterKeyBase64, \"base64\").toString(\"binary\");\n\n    if (decodedKey.length !== 32) {\n      throw new Error(\"encryptionMasterKeyBase64 must decode to 32 bytes, but the string \" + options.encryptionMasterKeyBase64 + \"' decodes to \" + decodedKey.length + \" bytes\");\n    }\n\n    this.encryptionMasterKey = decodedKey;\n  }\n}\n\nConfig.prototype.prefixPath = function () {\n  throw \"NotImplementedError: #prefixPath should be implemented by subclasses\";\n};\n\nConfig.prototype.getBaseURL = function () {\n  const port = this.port ? \":\" + this.port : \"\";\n  return this.scheme + \"://\" + this.host + port;\n};\n\nmodule.exports = Config;","map":{"version":3,"sources":["/media/amine/HDD1/Kraya/2DNI/TP/S2/Framework/Projet/IMessage-Clone/Frontend/node_modules/pusher/lib/config.js"],"names":["Token","require","isBase64","Config","options","useTLS","undefined","encrypted","Error","console","warn","scheme","port","appId","token","key","secret","timeout","agent","encryptionMasterKey","encryptionMasterKeyBase64","length","decodedKey","Buffer","from","toString","prototype","prefixPath","getBaseURL","host","module","exports"],"mappings":"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","sourcesContent":["const Token = require(\"./token\")\nconst isBase64 = require(\"is-base64\")\n\nfunction Config(options) {\n  options = options || {}\n\n  let useTLS = false\n  if (options.useTLS !== undefined && options.encrypted !== undefined) {\n    throw new Error(\n      \"Cannot set both `useTLS` and `encrypted` configuration options\"\n    )\n  } else if (options.useTLS !== undefined) {\n    useTLS = options.useTLS\n  } else if (options.encrypted !== undefined) {\n    // `encrypted` deprecated in favor of `useTLS`\n    console.warn(\"`encrypted` option is deprecated in favor of `useTLS`\")\n    useTLS = options.encrypted\n  }\n  this.scheme = options.scheme || (useTLS ? \"https\" : \"http\")\n  this.port = options.port\n\n  this.appId = options.appId\n  this.token = new Token(options.key, options.secret)\n\n  this.timeout = options.timeout\n  this.agent = options.agent\n\n  // Handle deprecated raw 32 byte string as key\n  if (options.encryptionMasterKey !== undefined) {\n    if (options.encryptionMasterKeyBase64 !== undefined) {\n      throw new Error(\n        \"Do not specify both encryptionMasterKey and encryptionMasterKeyBase64. \" +\n          \"encryptionMasterKey is deprecated, please specify only encryptionMasterKeyBase64.\"\n      )\n    }\n    console.warn(\n      \"`encryptionMasterKey` option is deprecated in favor of `encryptionMasterKeyBase64`\"\n    )\n    if (typeof options.encryptionMasterKey !== \"string\") {\n      throw new Error(\"encryptionMasterKey must be a string\")\n    }\n    if (options.encryptionMasterKey.length !== 32) {\n      throw new Error(\n        \"encryptionMasterKey must be 32 bytes long, but the string '\" +\n          options.encryptionMasterKey +\n          \"' is \" +\n          options.encryptionMasterKey.length +\n          \" bytes long\"\n      )\n    }\n\n    this.encryptionMasterKey = options.encryptionMasterKey\n  }\n\n  // Handle base64 encoded 32 byte key to encourage use of the full range of byte values\n  if (options.encryptionMasterKeyBase64 !== undefined) {\n    if (typeof options.encryptionMasterKeyBase64 !== \"string\") {\n      throw new Error(\"encryptionMasterKeyBase64 must be a string\")\n    }\n    if (!isBase64(options.encryptionMasterKeyBase64)) {\n      throw new Error(\"encryptionMasterKeyBase64 must be valid base64\")\n    }\n\n    const decodedKey = Buffer.from(\n      options.encryptionMasterKeyBase64,\n      \"base64\"\n    ).toString(\"binary\")\n    if (decodedKey.length !== 32) {\n      throw new Error(\n        \"encryptionMasterKeyBase64 must decode to 32 bytes, but the string \" +\n          options.encryptionMasterKeyBase64 +\n          \"' decodes to \" +\n          decodedKey.length +\n          \" bytes\"\n      )\n    }\n\n    this.encryptionMasterKey = decodedKey\n  }\n}\n\nConfig.prototype.prefixPath = function () {\n  throw \"NotImplementedError: #prefixPath should be implemented by subclasses\"\n}\n\nConfig.prototype.getBaseURL = function () {\n  const port = this.port ? \":\" + this.port : \"\"\n  return this.scheme + \"://\" + this.host + port\n}\n\nmodule.exports = Config\n"]},"metadata":{},"sourceType":"script"}