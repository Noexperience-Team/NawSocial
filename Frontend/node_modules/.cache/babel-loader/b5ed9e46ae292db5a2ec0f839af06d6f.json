{"ast":null,"code":"import _slicedToArray from\"/media/amine/HDD1/Kraya/2DNI/TP/S2/Framework/Projet/IMessage-Clone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar}from'@material-ui/core';import React,{useEffect,useState}from'react';import{useDispatch}from'react-redux';import{setChat}from'./features/chatSlice';import db from'./Firebase';import'./SidebarChat.css';import*as timeago from'timeago.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SidebarChat(_ref){var _chatInfo$,_chatInfo$2,_chatInfo$3,_chatInfo$3$timestamp;var id=_ref.id,chatName=_ref.chatName;var dispatch=useDispatch();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),chatInfo=_useState2[0],setChatInfo=_useState2[1];useEffect(function(){db.collection('chats').doc(id).collection('messages').orderBy('timestamp','desc').onSnapshot(function(snapshot){return setChatInfo(snapshot.docs.map(function(doc){return doc.data();}));});},[id]);return/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){return dispatch(setChat({chatId:id,chatName:chatName}));},className:\"sidebarChat\",children:[/*#__PURE__*/_jsx(Avatar,{src:(_chatInfo$=chatInfo[0])===null||_chatInfo$===void 0?void 0:_chatInfo$.photo}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebarChat__info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:chatName}),/*#__PURE__*/_jsx(\"p\",{children:(_chatInfo$2=chatInfo[0])===null||_chatInfo$2===void 0?void 0:_chatInfo$2.message}),/*#__PURE__*/_jsx(\"small\",{children:timeago.format(new Date((_chatInfo$3=chatInfo[0])===null||_chatInfo$3===void 0?void 0:(_chatInfo$3$timestamp=_chatInfo$3.timestamp)===null||_chatInfo$3$timestamp===void 0?void 0:_chatInfo$3$timestamp.toDate()))})]})]});}export default SidebarChat;","map":{"version":3,"sources":["/media/amine/HDD1/Kraya/2DNI/TP/S2/Framework/Projet/IMessage-Clone/src/SidebarChat.js"],"names":["Avatar","React","useEffect","useState","useDispatch","setChat","db","timeago","SidebarChat","id","chatName","dispatch","chatInfo","setChatInfo","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","chatId","photo","message","format","Date","timestamp","toDate"],"mappings":"qJAAA,OAASA,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAAQC,OAAR,KAAsB,sBAAtB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,MAAO,mBAAP,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,YAAzB,C,wFAGA,QAASC,CAAAA,WAAT,MAAqC,iEAAfC,CAAAA,EAAe,MAAfA,EAAe,CAAXC,QAAW,MAAXA,QAAW,CAEjC,GAAMC,CAAAA,QAAQ,CAAGP,WAAW,EAA5B,CAFiC,cAGDD,QAAQ,CAAC,EAAD,CAHP,wCAG1BS,QAH0B,eAGhBC,WAHgB,eAKjCX,SAAS,CAAE,UAAM,CACbI,EAAE,CAACQ,UAAH,CAAc,OAAd,EACCC,GADD,CACKN,EADL,EAECK,UAFD,CAEY,UAFZ,EAGCE,OAHD,CAGS,WAHT,CAGsB,MAHtB,EAICC,UAJD,CAIY,SAAAC,QAAQ,QAChBL,CAAAA,WAAW,CAACK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAAAL,GAAG,QAAIA,CAAAA,GAAG,CAACM,IAAJ,EAAJ,EAArB,CAAD,CADK,EAJpB,EAOH,CARQ,CAQN,CAACZ,EAAD,CARM,CAAT,CAUA,mBACI,aACA,OAAO,CAAE,yBACLE,CAAAA,QAAQ,CACJN,OAAO,CAAC,CACJiB,MAAM,CAAEb,EADJ,CAEJC,QAAQ,CAAEA,QAFN,CAAD,CADH,CADH,EADT,CASA,SAAS,CAAC,aATV,wBAUI,KAAC,MAAD,EAAQ,GAAG,aAAEE,QAAQ,CAAC,CAAD,CAAV,qCAAE,WAAaW,KAA1B,EAVJ,cAWI,aAAK,SAAS,CAAC,mBAAf,wBACI,oBAAKb,QAAL,EADJ,cAEI,gCAAIE,QAAQ,CAAC,CAAD,CAAZ,sCAAI,YAAaY,OAAjB,EAFJ,cAII,uBAAQjB,OAAO,CAACkB,MAAR,CACJ,GAAIC,CAAAA,IAAJ,cAASd,QAAQ,CAAC,CAAD,CAAjB,6DAAS,YAAae,SAAtB,gDAAS,sBAAwBC,MAAxB,EAAT,CADI,CAAR,EAJJ,GAXJ,GADJ,CAuBH,CAED,cAAepB,CAAAA,WAAf","sourcesContent":["import { Avatar } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport {setChat} from './features/chatSlice';\nimport db from './Firebase';\nimport './SidebarChat.css';\nimport * as timeago from 'timeago.js';\n\n\nfunction SidebarChat({id, chatName}) {\n\n    const dispatch = useDispatch();\n    const [chatInfo, setChatInfo] = useState([]);\n\n    useEffect (() => {\n        db.collection('chats')\n        .doc(id)\n        .collection('messages')\n        .orderBy('timestamp', 'desc')\n        .onSnapshot(snapshot => (\n            setChatInfo(snapshot.docs.map(doc => doc.data()))\n        ));\n    }, [id]);\n    \n    return (\n        <div \n        onClick={() => \n            dispatch(\n                setChat({\n                    chatId: id,\n                    chatName: chatName,\n                })\n            )\n        } \n        className='sidebarChat'>\n            <Avatar src={chatInfo[0]?.photo}/>\n            <div className='sidebarChat__info'>\n                <h3>{chatName}</h3>\n                <p>{chatInfo[0]?.message}</p>\n                \n                <small>{timeago.format(\n                    new Date(chatInfo[0]?.timestamp?.toDate()))}\n                </small>\n            \n            </div>\n        </div>\n    )\n}\n\nexport default SidebarChat\n"]},"metadata":{},"sourceType":"module"}